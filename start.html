<html>
<body>
<pre><script>
    function log(arg) {
        document.writeln(arg);
    }

    function identity(x) {
        return x;
    }

    function add(x, y) {
        return x + y;
    }

    function sub(x, y) {
        return x - y;
    }

    function mul(x, y) {
        return x * y;
    }


    function identityf(x) {
        return function () {
            return x;
        };
    }

    // test
    //    var three = identityf(3);
    //    log(three());

    function addf(x) {
        return function (y) {
            return x + y;
        }
    }

    // test
    //    log(addf(3)(4));

    function liftf(f) {
        return function (x) {
            return function (y) {
                return f(x, y);
            }
        }
    }

    // test
    //    var addf = liftf(add);
    //    log(addf(3)(4));
    //    log(liftf(mul)(5)(6));

    function curry(binary, first) {
        return function (second) {
            return binary(first, second);
        }
    }

    // test
    //    var add3 = curry(add, 3);
    //    log(add3(4));
    //    log(curry(mul, 5)(6));


    // Without writing any new functions, show three ways to create the inc function
    //    var inc = addf(1);
    //    var inc = curry(add, 1);
    var inc = liftf(add)(1);
    //    log(inc(5));
    //    log(inc(inc(5)));

    function twice(binary) {
        return function (x) {
            return binary(x, x);
        }
    }

    //    test
    // log(add(11, 11));
    var doubl = twice(add);
    //        log(doubl(11));
    var square = twice(mul);
    //        log(square(11));


    function reverse(binary) {
        return function (x, y) {
            return binary(y, x);
        }
    }

    // test
    //    var bus = reverse(sub);
    //    log(bus(3, 2));


    function composeu(unary1, unary2) {
        return function (x) {
            return unary2(unary1(x));
        }
    }

    // test
    //    log(composeu(doubl, square)(5));  // 100


    // write a function that takes two binary functions and returns a function that calls them both
    function composeb(binary1, binary2) {
        return function (x, y, z) {
            return binary2(binary1(x, y), z);
        }
    }

    // test
    //    log(composeb(add, mul)(2, 3, 7));  // 35


    // write a function that allows a binary function to be called only once
    function once(binary) {
        var count = 0;
        return function (x, y) {
            count += 1;

            if (count === 1) {
                return binary(x, y);
            }
            else {
                return undefined;
            }
        }
    }

    // test
    var add_once = once(add);
    log(add_once(3, 4)); // 7
    log(add_once(3, 5)); // undefined

</script></pre>
</body>
</html>